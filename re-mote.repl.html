<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>re-mote.repl documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">re-mote</span> <span class="project-version">0.8.3</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>re-mote</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></div></li><li class="depth-3 branch"><a href="re-mote.api.endpoint.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>endpoint</span></div></a></li><li class="depth-3"><a href="re-mote.api.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2 branch"><a href="re-mote.core.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="re-mote.launch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launch</span></div></a></li><li class="depth-2 branch"><a href="re-mote.log.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>persist</span></div></div></li><li class="depth-3"><a href="re-mote.persist.es.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>es</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>publish</span></div></div></li><li class="depth-3"><a href="re-mote.publish.email.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>email</span></div></a></li><li class="depth-2 current"><a href="re-mote.repl.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-3 branch"><a href="re-mote.repl.base.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>base</span></div></a></li><li class="depth-3 branch"><a href="re-mote.repl.octo.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>octo</span></div></a></li><li class="depth-3 branch"><a href="re-mote.repl.output.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>output</span></div></a></li><li class="depth-3 branch"><a href="re-mote.repl.pkg.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pkg</span></div></a></li><li class="depth-3 branch"><a href="re-mote.repl.publish.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>publish</span></div></a></li><li class="depth-3 branch"><a href="re-mote.repl.puppet.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>puppet</span></div></a></li><li class="depth-3 branch"><a href="re-mote.repl.re-gent.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>re-gent</span></div></a></li><li class="depth-3 branch"><a href="re-mote.repl.schedule.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>schedule</span></div></a></li><li class="depth-3 branch"><a href="re-mote.repl.sensors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sensors</span></div></a></li><li class="depth-3 branch"><a href="re-mote.repl.spec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spec</span></div></a></li><li class="depth-3"><a href="re-mote.repl.zfs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zfs</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -362px;"><span class="top" style="height: 371px;"></span><span class="bottom"></span></span><span>scripts</span></div></div></li><li class="depth-3 branch"><a href="re-mote.scripts.security.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>security</span></div></a></li><li class="depth-3 branch"><a href="re-mote.scripts.sensors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sensors</span></div></a></li><li class="depth-3"><a href="re-mote.scripts.stats.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stats</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>ssh</span></div></div></li><li class="depth-3 branch"><a href="re-mote.ssh.pipeline.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline</span></div></a></li><li class="depth-3"><a href="re-mote.ssh.transport.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transport</span></div></a></li><li class="depth-2 branch"><a href="re-mote.validate.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>validate</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>zero</span></div></div></li><li class="depth-3 branch"><a href="re-mote.zero.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.cycle.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cycle</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.events.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>events</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.facts.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>facts</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.functions.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>functions</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.git.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>git</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.management.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>management</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.pipeline.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pipeline</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.pkg.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pkg</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.results.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>results</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.security.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>security</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.send.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>send</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.sensors.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sensors</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.shell.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.stats.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stats</span></div></a></li><li class="depth-3 branch"><a href="re-mote.zero.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3"><a href="re-mote.zero.worker.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>worker</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="re-mote.repl.html#var-copy-module"><div class="inner"><span>copy-module</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-cpu-persist"><div class="inner"><span>cpu-persist</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-deploy"><div class="inner"><span>deploy</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-du-persist"><div class="inner"><span>du-persist</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-failing"><div class="inner"><span>failing</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-filter-hosts"><div class="inner"><span>filter-hosts</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-inactive-firewall"><div class="inner"><span>inactive-firewall</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-install"><div class="inner"><span>install</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-kill"><div class="inner"><span>kill</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-launch"><div class="inner"><span>launch</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-listing"><div class="inner"><span>listing</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-load-persist"><div class="inner"><span>load-persist</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-low-disk"><div class="inner"><span>low-disk</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-net-persist"><div class="inner"><span>net-persist</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-nmap-scan"><div class="inner"><span>nmap-scan</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-pakage-fix"><div class="inner"><span>pakage-fix</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-provision"><div class="inner"><span>provision</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-pull"><div class="inner"><span>pull</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-ram-persist"><div class="inner"><span>ram-persist</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-run-module"><div class="inner"><span>run-module</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-setup"><div class="inner"><span>setup</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-single"><div class="inner"><span>single</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-temperature-persist"><div class="inner"><span>temperature-persist</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-tofrom"><div class="inner"><span>tofrom</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-update"><div class="inner"><span>update</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-update-"><div class="inner"><span>update-</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-upgrade"><div class="inner"><span>upgrade</span></div></a></li><li class="depth-1"><a href="re-mote.repl.html#var-upgrade-"><div class="inner"><span>upgrade-</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">re-mote.repl</h1><div class="doc"><div class="markdown"><p>The main API for using Re-mote, it includes a list of high level workflows, each composed from a series of operations and pipelines.</p></div></div><div class="public anchor" id="var-copy-module"><h3>copy-module</h3><div class="usage"><code>(copy-module hs pkg)</code></div><div class="doc"><div class="markdown"><p>Copy an opskeleton tar file</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L165">view source</a></div></div><div class="public anchor" id="var-cpu-persist"><h3>cpu-persist</h3><div class="usage"><code>(cpu-persist hs)</code></div><div class="doc"><div class="markdown"><p>CPU usage and idle stats collection and persistence</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L102">view source</a></div></div><div class="public anchor" id="var-deploy"><h3>deploy</h3><div class="usage"><code>(deploy {:keys [auth], :as hs} bin)</code></div><div class="doc"><div class="markdown"><p>deploy re-gent and setup .curve remotely: (deploy sandbox “path/to/re-gent”)</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L186">view source</a></div></div><div class="public anchor" id="var-du-persist"><h3>du-persist</h3><div class="usage"><code>(du-persist hs)</code></div><div class="doc"><div class="markdown"><p>Disk usage</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L97">view source</a></div></div><div class="public anchor" id="var-failing"><h3>failing</h3><div class="usage"><code>(failing hs)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L220">view source</a></div></div><div class="public anchor" id="var-filter-hosts"><h3>filter-hosts</h3><div class="usage"><code>(filter-hosts hs f)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L214">view source</a></div></div><div class="public anchor" id="var-inactive-firewall"><h3>inactive-firewall</h3><div class="usage"><code>(inactive-firewall hs)</code></div><div class="doc"><div class="markdown"><p>Find hosts with inactive firewall instances: (inactive-firewall hs)</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L81">view source</a></div></div><div class="public anchor" id="var-install"><h3>install</h3><div class="usage"><code>(install hs pkg)</code></div><div class="doc"><div class="markdown"><p>Install a package on hosts</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L154">view source</a></div></div><div class="public anchor" id="var-kill"><h3>kill</h3><div class="usage"><code>(kill hs)</code></div><div class="doc"><div class="markdown"><p>kill re-gent process: (kill develop)</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L195">view source</a></div></div><div class="public anchor" id="var-launch"><h3>launch</h3><div class="usage"><code>(launch {:keys [auth], :as hs})</code></div><div class="doc"><div class="markdown"><p>start re-gent process: (launch develop)</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L201">view source</a></div></div><div class="public anchor" id="var-listing"><h3>listing</h3><div class="usage"><code>(listing hs)</code></div><div class="doc"><div class="markdown"><p>Run a folder listing on remote hosts: (listing hs)</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L65">view source</a></div></div><div class="public anchor" id="var-load-persist"><h3>load-persist</h3><div class="usage"><code>(load-persist hs)</code></div><div class="doc"><div class="markdown"><p>Average load collection and persistence</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L122">view source</a></div></div><div class="public anchor" id="var-low-disk"><h3>low-disk</h3><div class="usage"><code>(low-disk hs f)</code></div><div class="doc"><div class="markdown"><p>Detect machines with low disk available</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L90">view source</a></div></div><div class="public anchor" id="var-net-persist"><h3>net-persist</h3><div class="usage"><code>(net-persist hs)</code></div><div class="doc"><div class="markdown"><p>KB in/out stats collection and persistence</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L112">view source</a></div></div><div class="public anchor" id="var-nmap-scan"><h3>nmap-scan</h3><div class="usage"><code>(nmap-scan hs flags network)</code></div><div class="doc"><div class="markdown"><p>Run an nmap scan from the provided hosts: (nmap-scan scan-node “-T5” “192.168.1.0/24”)</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L74">view source</a></div></div><div class="public anchor" id="var-pakage-fix"><h3>pakage-fix</h3><div class="usage"><code>(pakage-fix hs)</code></div><div class="doc"><div class="markdown"><p>Fix package provider</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L159">view source</a></div></div><div class="public anchor" id="var-provision"><h3>provision</h3><div class="usage"><code>(provision hs {:keys [src]})</code></div><div class="doc"><div class="markdown"><p>Sync puppet source code into the remote machine and run</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L178">view source</a></div></div><div class="public anchor" id="var-pull"><h3>pull</h3><div class="usage"><code>(pull hs {:keys [repo remote branch]})</code></div><div class="doc"><div class="markdown"><p>update a local git repo</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L209">view source</a></div></div><div class="public anchor" id="var-ram-persist"><h3>ram-persist</h3><div class="usage"><code>(ram-persist hs)</code></div><div class="doc"><div class="markdown"><p>RAM free and used percentage collection and persistence</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L107">view source</a></div></div><div class="public anchor" id="var-run-module"><h3>run-module</h3><div class="usage"><code>(run-module hs pkg args)</code></div><div class="doc"><div class="markdown"><p>Run an opskeleton sandbox</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L172">view source</a></div></div><div class="public anchor" id="var-setup"><h3>setup</h3><div class="usage"><code>(setup)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L51">view source</a></div></div><div class="public anchor" id="var-single"><h3>single</h3><div class="usage"><code>(single h &amp; m)</code></div><div class="doc"><div class="markdown"><p>Access a single host: (single “foo”) (single “foo” {:ssh-key “/home/bar/.ssh/rsa_key”) ; optional map</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L57">view source</a></div></div><div class="public anchor" id="var-temperature-persist"><h3>temperature-persist</h3><div class="usage"><code>(temperature-persist hs)</code></div><div class="doc"><div class="markdown"><p>Collect CPU temperature (using lm-sensors) and publish</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L117">view source</a></div></div><div class="public anchor" id="var-tofrom"><h3>tofrom</h3><div class="usage"><code>(tofrom desc)</code></div><div class="doc"><div class="markdown"><p>Email configuration</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L127">view source</a></div></div><div class="public anchor" id="var-update"><h3>update</h3><div class="usage"><code>(update hs)</code></div><div class="doc"><div class="markdown"><p>Apt update on hosts</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L144">view source</a></div></div><div class="public anchor" id="var-update-"><h3>update-</h3><div class="usage"><code>(update- hs)</code></div><div class="doc"><div class="markdown"><p>update with downgrading</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L134">view source</a></div></div><div class="public anchor" id="var-upgrade"><h3>upgrade</h3><div class="usage"><code>(upgrade hs)</code></div><div class="doc"><div class="markdown"><p>Apt update and upgrade on hosts, only update successful hosts gets upgraded</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L149">view source</a></div></div><div class="public anchor" id="var-upgrade-"><h3>upgrade-</h3><div class="usage"><code>(upgrade- hs m)</code></div><div class="doc"><div class="markdown"><p>upgrade with downgrading</p></div></div><div class="src-link"><a href="https://github.com/re-ops/re-mote/blob/master/src/re_mote/repl.clj#L139">view source</a></div></div></div></body></html>